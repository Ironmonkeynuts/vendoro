{% extends "admintools/base.html" %}
{% block admintools_content %}
<form method="get" class="row g-2 align-items-center mb-3">
  <div class="col-sm-8">
    <input type="text" name="q" value="{{ request.GET.q }}" class="form-control"
           placeholder="Search by name, username, email">
  </div>
  <div class="col-sm-4 d-flex gap-2">
    <button class="btn btn-primary w-100">Search</button>
    <a class="btn btn-outline-secondary" href="{% url 'admintools:users' %}">Reset</a>
  </div>
</form>

<div class="table-responsive">
  <table class="table align-middle">
    <thead>
      <tr class="text-muted small">
        <th>User</th>
        <th>Email</th>
        <th>Joined</th>
        <th>Active</th>
        <th>Staff</th>
        <th>Superuser</th>
      </tr>
    </thead>
    <tbody>
      {% for u in object_list %}
        <tr>
          <td>
            <div class="fw-medium">{{ u.get_full_name|default:u.username }}</div>
            <div class="small text-muted">@{{ u.username }}</div>
          </td>
          <td>{{ u.email }}</td>
          <td>{{ u.date_joined|date:"Y-m-d H:i" }}</td>
          <td>{{ u.is_active|yesno:"Yes,No" }}</td>
          <td>{{ u.is_staff|yesno:"Yes,No" }}</td>
          <td>{{ u.is_superuser|yesno:"Yes,No" }}</td>
        </tr>
      {% empty %}
        <tr><td colspan="6" class="text-muted">No users found.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<nav aria-label="Pagination">
  <ul class="pagination">
    {% if page_obj.has_previous %}
      <li class="page-item"><a class="page-link" href="?q={{ request.GET.q }}&page={{ page_obj.previous_page_number }}">Prev</a></li>
    {% else %}
      <li class="page-item disabled"><span class="page-link">Prev</span></li>
    {% endif %}
    <li class="page-item disabled"><span class="page-link">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span></li>
    {% if page_obj.has_next %}
      <li class="page-item"><a class="page-link" href="?q={{ request.GET.q }}&page={{ page_obj.next_page_number }}">Next</a></li>
    {% else %}
      <li class="page-item disabled"><span class="page-link">Next</span></li>
    {% endif %}
  </ul>
</nav>
{% endblock %}

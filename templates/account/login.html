{% extends "base.html" %}
{% load i18n %}
{% block title %}{% trans "Sign in" %} — Vendoro{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-sm-10 col-md-8 col-lg-5">
    <h1 class="h4 mb-3">{% trans "Sign in" %}</h1>

    {# Flash messages #}
    {% if messages %}
      <div class="mb-3">
        {% for message in messages %}
          <div class="alert alert-{{ message.tags|default:'info' }} mb-2" role="alert">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <div class="card shadow-sm">
      <div class="card-body">
        <form method="post" action="{% url 'account_login' %}" novalidate>
          {% csrf_token %}

          {# Non-field errors #}
          {% if form.non_field_errors %}
            <div class="alert alert-danger" role="alert">
              {{ form.non_field_errors }}
            </div>
          {% endif %}

          <div class="mb-3">
            <label class="form-label" for="{{ form.login.id_for_label }}">
              {% if form.login.label %}{{ form.login.label }}{% else %}{% trans "Email or Username" %}{% endif %}
            </label>
            <input
              type="text"
              name="{{ form.login.html_name }}"
              id="{{ form.login.id_for_label }}"
              class="form-control{% if form.login.errors %} is-invalid{% endif %}"
              value="{{ form.login.value|default_if_none:'' }}"
              autocomplete="username"
              required
            >
            {% if form.login.errors %}
              <div class="invalid-feedback">
                {{ form.login.errors|striptags }}
              </div>
            {% endif %}
          </div>

          <div class="mb-2">
            <label class="form-label" for="{{ form.password.id_for_label }}">
              {{ form.password.label|default:_("Password") }}
            </label>
            <input
              type="password"
              name="{{ form.password.html_name }}"
              id="{{ form.password.id_for_label }}"
              class="form-control{% if form.password.errors %} is-invalid{% endif %}"
              autocomplete="current-password"
              required
            >
            {% if form.password.errors %}
              <div class="invalid-feedback">
                {{ form.password.errors|striptags }}
              </div>
            {% endif %}
          </div>

          <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
              {% if form.remember %}
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    name="{{ form.remember.html_name }}"
                    id="{{ form.remember.id_for_label }}"
                    {% if form.remember.value %}checked{% endif %}
                  >
                  <label class="form-check-label" for="{{ form.remember.id_for_label }}">
                    {{ form.remember.label|default:_("Remember me") }}
                  </label>
                </div>
              {% endif %}
            </div>
            <div>
              <a class="small" href="{% url 'account_reset_password' %}">{% trans "Forgot password?" %}</a>
            </div>
          </div>

          {# Preserve ?next=... #}
          {% if redirect_field_value %}
            <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}">
          {% endif %}

          <div class="d-grid gap-2">
            <button class="btn btn-primary" type="submit">{% trans "Sign in" %}</button>
          </div>
        </form>
      </div>
    </div>

    <p class="mt-3 mb-0 text-muted">
      {% trans "Don’t have an account?" %} <a href="{% url 'account_signup' %}{% if redirect_field_value %}?{{ redirect_field_name }}={{ redirect_field_value|urlencode }}{% endif %}">{% trans "Sign up" %}</a>
    </p>
  </div>
</div>
{% endblock %}
